---
services:
  claude-code:
    container_name: claude-code
    image: dceoy/claude-code:latest
    build:
      context: .
      dockerfile: Dockerfile
      target: cli
      args:
        USER_NAME: claude
        USER_UID: '1001'
        USER_GID: '1001'
    environment:
      OPENROUTER_API_KEY: ${OPENROUTER_API_KEY:-}
      ANTHROPIC_BASE_URL: https://openrouter.ai/api
      ANTHROPIC_AUTH_TOKEN: ${OPENROUTER_API_KEY:-}
      ANTHROPIC_API_KEY: ''   # Important: Must be explicitly empty
    tty: true
    stdin_open: true
    volumes:
      - .:/workspace
      - claude-config:/home/claude/.claude
    working_dir: /workspace
    entrypoint:
      - zsh
    command:
      - -l
volumes:
  claude-config:
